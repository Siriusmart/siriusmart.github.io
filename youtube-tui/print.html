<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>YouTube TUI User Manual</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="The user manual, documentation and contribution guide for YouTube TUI">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="basic_usage.html"><strong aria-hidden="true">3.</strong> Basic usage</a></li><li class="chapter-item expanded "><a href="commands.html"><strong aria-hidden="true">4.</strong> Commands</a></li><li class="chapter-item expanded affix "><li class="part-title">Customisation guide</li><li class="chapter-item expanded "><a href="config/index.html"><strong aria-hidden="true">5.</strong> Config files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="config/main.html"><strong aria-hidden="true">5.1.</strong> main</a></li><li class="chapter-item expanded "><a href="config/commands.html"><strong aria-hidden="true">5.2.</strong> commands</a></li><li class="chapter-item expanded "><a href="config/keybindings.html"><strong aria-hidden="true">5.3.</strong> keybindings</a></li><li class="chapter-item expanded "><a href="config/commandbindings.html"><strong aria-hidden="true">5.4.</strong> commandbindings</a></li><li class="chapter-item expanded "><a href="config/pages.html"><strong aria-hidden="true">5.5.</strong> pages</a></li><li class="chapter-item expanded "><a href="config/appearance.html"><strong aria-hidden="true">5.6.</strong> appearance</a></li><li class="chapter-item expanded "><a href="config/search.html"><strong aria-hidden="true">5.7.</strong> search</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Contributing</li><li class="chapter-item expanded "><a href="explaination/how_it_works.html"><strong aria-hidden="true">6.</strong> How it works</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="explaination/framework.html"><strong aria-hidden="true">6.1.</strong> Framework</a></li><li class="chapter-item expanded "><a href="explaination/event-loop.html"><strong aria-hidden="true">6.2.</strong> Event loop</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Invidious and loading videos</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Caching and library</div></li></ol></li><li class="chapter-item expanded "><a href="changelogs.html"><strong aria-hidden="true">7.</strong> Changelogs</a></li><li class="chapter-item expanded "><a href="contributors.html"><strong aria-hidden="true">8.</strong> Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">YouTube TUI User Manual</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/siriusmart/youtube-tui/tree/master/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p>Written in Rust, the <strong>YouTube TUI</strong> is a lightweight and user friendly TUI for browsing YouTube content from the terminal.</p>
<p><img src="./images/search-showcase.png" alt="" /></p>
<p>It is like an <em>app launcher</em>, it launches other programs to do the heavy lifting (for example, <code>mpv</code> for playing videos).</p>
<blockquote>
<p>Consider regenerating config files on updates to allow new features.</p>
</blockquote>
<h2 id="customisable"><a class="header" href="#customisable">Customisable</a></h2>
<p>The YouTube TUI can be customised through config files, they are located in <code>~/.config/youtube-tui</code> and are in the YAML format.</p>
<p>Here's an example of the config file:</p>
<pre><code class="language-yaml">mouse_support: true
invidious_instance: https://vid.puffyan.us
max_watch_history: 50
allow_unicode: false
images: Sixels
refresh_after_modifying_search_filters: true
provider: YouTube
env:
  browser: firefox
  video-player: mpv
  youtube-downloader: yt-dlp
  terminal-emulator: konsole -e
</code></pre>
<p>Anything from layouts to colours and keybindings can be customised, more on that later.</p>
<h2 id="dependency-free"><a class="header" href="#dependency-free">Dependency-free*</a></h2>
<p><sub>See <a href="./installation.html#features">installation#features</a> for more info on dependencies.</sub></p>
<p>The YouTube TUI does not work on its own, it is instead like a <em>TUI frontend</em> for programs like <code>mpv</code> or <code>yt-dlp</code>/<code>youtube-dl</code>.</p>
<p>However, the programs to launch can be changed, and therefore the YouTube TUI <u>does not rely on any specific dependencies</u> to run.</p>
<p><img src="./images/custom-dependencies-showcase.png" alt="" /></p>
<h2 id="powerful"><a class="header" href="#powerful">Powerful</a></h2>
<p>The YouTube TUI allows you to browse YouTube with (almost) all of it's features, functions including:</p>
<ul>
<li>View popular/trending videos</li>
<li>View information about channels, playlists and videos</li>
<li>Use search filters to sort and filter search results</li>
<li>Save browsing history</li>
</ul>
<p>It also includes features like:</p>
<ul>
<li>Vim-like commands</li>
<li>Mouse support</li>
<li>Extensible keybindings system</li>
<li>Offline library</li>
<li>Subscriptions</li>
</ul>
<h3 id="what-it-doesnt-have"><a class="header" href="#what-it-doesnt-have">What it doesn't have</a></h3>
<ul>
<li>[URGENT] Replace the no-longer-going-to-compile <code>typemap</code> dependency with either a self implementation of it or a useable crate.</li>
<li>Strip down some libraries to reduce compile speed.</li>
<li>Add command section for channel main page (first priority)</li>
<li>Up arrow command history + Ctrl arrow keys move between words</li>
</ul>
<h2 id="how-to-contribute"><a class="header" href="#how-to-contribute">How to contribute</a></h2>
<p>You will need a <u>general knowledge</u> of the Rust programming language, and the ability to <em>understand my spaghetti</em>.</p>
<ol>
<li>Open an issue to make sure nobody else is working on the same feature</li>
<li>Write code</li>
<li>Open a pull request</li>
<li>Get merged?</li>
</ol>
<p>Or just <em>fix that typo in README</em> -_-</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>The YouTube TUI is <em>not</em> intended for Windows, pull requests to make it work are welcome.</p>
<h2 id="install-from-cratesio-recommended"><a class="header" href="#install-from-cratesio-recommended">Install from Crates.io (recommended)</a></h2>
<p>Crates.io is a repository for programs written in Rust, and the YouTube TUI is available <a href="https://crates.io/crates/youtube-tui" target=_blank><em>there</em></a>.</p>
<p>To install using this method, you will need <code>rustc</code> and <code>cargo</code> present. <a href="https://www.rust-lang.org/tools/install" target=_blank><em>Here</em></a>'s a tutorial on how to get them.</p>
<p>Now, run the following command:</p>
<pre><code class="language-sh">cargo install youtube-tui
</code></pre>
<blockquote>
<p>To check and update all programs installed from Crates.io, you can use CLI tools like <a href="https://crates.io/crates/cargo-update" target=_blank><em>cargo-update</em></a>.</p>
</blockquote>
<h2 id="aur-for-arch-linux-recommended"><a class="header" href="#aur-for-arch-linux-recommended">AUR for Arch Linux (recommended)</a></h2>
<p>The YouTube TUI is available in the AUR <a href="https://aur.archlinux.org/packages/youtube-tui-git" target=_blank><em>here</em></a>.</p>
<p>Use an <a href="https://aur.archlinux.org" target=_blank>AUR</a> helper like <a href="https://aur.archlinux.org/packages/yay" target=_blank><code>yay</code></a> to install.</p>
<pre><code class="language-sh">yay -S youtube-tui # lastest crates.io release, recommended
yay -S youtube-tui-git # latest git version, potentially untested
yay -S youtube-tui-full-bin # default binary (out of date)
yay -S youtube-tui-nodefaults-bin # minimal binary (out of date)
</code></pre>
<h2 id="installation-on-nixos--recommended"><a class="header" href="#installation-on-nixos--recommended">Installation on NixOS  (recommended)</a></h2>
<p>Add the following Nix code to your NixOS Configuration</p>
<pre><code class="language-nix">environment.systemPackages = [
  pkgs.youtube-tui
];
</code></pre>
<h2 id="build-from-source"><a class="header" href="#build-from-source">Build from source</a></h2>
<p>Use the <code>cargo</code> command:</p>
<pre><code class="language-sh">cargo install --git https://github.com/siriusmart/youtube-tui
</code></pre>
<h3 id="confirm-youtube-tui-has-been-installed"><a class="header" href="#confirm-youtube-tui-has-been-installed">Confirm YouTube TUI has been installed</a></h3>
<p>Run the following command in terminal:</p>
<pre><code class="language-sh">youtube-tui
</code></pre>
<p>If installed correctly, a TUI should be launched. Press <code>q</code> to close the TUI.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<p>The TUI has features that can be enabled/disabled when compiling.</p>
<pre><code class="language-sh">cargo install youtube-tui # install with all default features
cargo install youtube-tui --no-default-features # install without any features enabled
cargo install youtube-tui --no-default-features -F 'halfblock' # install with only HalfBlocks support (but not Sixels)
cargo install youtube-tui --no-default-features -F 'clipboard' -F 'sixel' # can install with multiple features by doing this
cargo install youtube-tui --all-features # install with all features (even if not included in default)
</code></pre>
<h3 id="halfblock-default"><a class="header" href="#halfblock-default"><code>halfblock</code> (default)</a></h3>
<p>Display images through HalfBlocks, work best in terminals with TrueColour support.</p>
<h3 id="sixel-default"><a class="header" href="#sixel-default"><code>sixel</code> (default)</a></h3>
<p>Display images with Sixels, allows the display of images at full definition. Not present on windows.</p>
<p>Enabling this will also enable <code>halfblock</code>.</p>
<p>Requires <a href="https://github.com/saitoha/libsixel" target=_blank><code>libsixel</code></a>.</p>
<h3 id="clipboard-default"><a class="header" href="#clipboard-default"><code>clipboard</code> (default)</a></h3>
<p>Allows clipboard pasting in commands and search bar.</p>
<p>Requires <a href="https://xcb.freedesktop.org/" target=_blank><code>libxcb</code></a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-usage"><a class="header" href="#basic-usage">Basic usage</a></h1>
<p>Here is a basic how-to guide on the TUI.</p>
<h2 id="cursor"><a class="header" href="#cursor">Cursor</a></h2>
<p>The <em>cursor</em> can be moved using arrow keys, or Vim keybindings (hjkl).</p>
<p><img src="./images/cursor-showcasae.png" alt="" /></p>
<p>The item with the cursor hovering will have a <u>red outline</u>.</p>
<blockquote>
<p>Everything here refers to the <em>latest default config</em>, including the keybindings.</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>Function</th><th>Key(s)</th></tr></thead><tbody>
<tr><td>Select</td><td>Enter</td></tr>
<tr><td>Deselect</td><td>Esc</td></tr>
<tr><td>Cursor up</td><td>Up arrow / <code>k</code></td></tr>
<tr><td>Cursor down</td><td>Down arrow / <code>j</code></td></tr>
<tr><td>Cursor left</td><td>Left arrow / <code>h</code></td></tr>
<tr><td>Cursor right</td><td>Right arrow / <code>l</code></td></tr>
<tr><td>Previous page</td><td>Backspace / Alt + Left arrow</td></tr>
<tr><td>First page history</td><td>Home</td></tr>
<tr><td>Clear page history</td><td>End</td></tr>
<tr><td>Paste from clipboard</td><td><code>Ctrl</code> + <code>V</code></td></tr>
<tr><td>Enter command mode</td><td><code>:</code></td></tr>
<tr><td>Quit</td><td><code>q</code></td></tr>
</tbody></table>
</div>
<h2 id="selection"><a class="header" href="#selection">Selection</a></h2>
<p>Selecting an item allows you to move the cursor within that item, to select an item, press <code>Enter</code>.</p>
<p>When nothing is selected, you can move the cursor between items, to deselect from an item, hit <code>Esc</code>.</p>
<h2 id="searching"><a class="header" href="#searching">Searching</a></h2>
<p>Type the search query when the search bar and press <code>Enter</code>, use arrow keys to move the cursor around.</p>
<p>To apply search filters, select the button with 3 dots (<code>...</code>) to the right of the search bar, hit enter to start modifying and enter again to save. Pressing <code>Esc</code> should reload the current search page to apply the filters.</p>
<p><img src="./images/search-filters-showcase.png" alt="" /></p>
<h2 id="playing-videos-and-playlists"><a class="header" href="#playing-videos-and-playlists">Playing videos and playlists</a></h2>
<blockquote>
<p>This part assumes that you use <code>mpv</code> as your video player, <code>konsole</code> as your terminal emulator, <code>yt-dlp</code> as your YouTube video downloader, and <code>firefox</code> as your browser.</p>
<p>If that is not the case, you can learn how to change that in the <em>custom commands</em> section.</p>
</blockquote>
<p>Press <code>Enter</code> to select a video or playlist from any lists, then move the cursor to the <em>bottom item</em> where you can play, download and open the webpage in browser.</p>
<h2 id="feeds"><a class="header" href="#feeds">Feeds</a></h2>
<p>Feeds allows you to view updates from subscribed channels, similar to how subscriptions works on YouTube.</p>
<p><img src="./images/feed-showcase.png" alt="" /></p>
<h2 id="command-mode"><a class="header" href="#command-mode">Command mode</a></h2>
<p>Command mode is like that of Vim, it can be started by pressing <code>:</code> when nothing is selected.</p>
<p>More about commands in the <a href="commands.html">next chapter</a>.</p>
<h2 id="command-bindings"><a class="header" href="#command-bindings">Command bindings</a></h2>
<p>Keys can be bind to a command, more about it in the next chapter.</p>
<p>For example <code>Ctrl + F</code> launches your web browser.</p>
<h2 id="buttons"><a class="header" href="#buttons">Buttons</a></h2>
<p>Buttons are similar to hyperlinks, it allows you to navigate between pages.</p>
<h2 id="mouse-click-control"><a class="header" href="#mouse-click-control">Mouse click control</a></h2>
<p><img src="./images/mouse-showcase.png" alt="" /></p>
<p>Mouse click controls has been added, you can now use your mouse to navigate around the TUI. Here are the general rules:</p>
<ol>
<li>Clicking an item <em>moves the cursor</em> to that item, clicking again <em>selects</em> the item</li>
<li>Clicking on buttons, or items on a list has the same effect as pressing <code>Enter</code> on them</li>
<li>Clicking outside a popup closes the popup</li>
</ol>
<p>However, there are some downsides to not using your keyboard.</p>
<ol>
<li>Cannot move up or down to items not on screen in a list (you can do that with <code>Up</code> or <code>Down arrow</code>)</li>
<li>Cannot access function keys like <code>Backspace</code> or <code>Q</code></li>
</ol>
<h2 id="library"><a class="header" href="#library">Library</a></h2>
<p>Items can be bookmarked and saved to library, they can also be saved to be viewed offline.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="commands"><a class="header" href="#commands">Commands</a></h1>
<p>Commands can be entered to the TUI by pressing the <code>:</code> key, the same as in Vim. Some commands have shorter <em>alternatives</em> that can be used instead.</p>
<blockquote>
<p>Env variables can be used by passing in as <code>${key}</code>, such as <code>:channel ${channel-id}</code> when in a video or playlist page.</p>
</blockquote>
<p><strong>Loadpage commands</strong> can also be used when launching, for example <code>youtube-tui loadpage popular</code> or <code>youtube-tui popular</code>.</p>
<blockquote>
<p>Commands can be joined together using <code>;;</code>.</p>
</blockquote>
<p>Below are the avaliable commands:</p>
<h2 id="loadpage"><a class="header" href="#loadpage">Loadpage</a></h2>
<p><code>loadpage</code> can be used to load a specific page.</p>
<pre><code class="language-vim">loadpage popular (alt: `popular`)
loadpage trending (alt: `trending`)
loadpage watchhistory (alt: `watchhistory`)
loadpage search [search query] (alt: `search [search query]`)
loadpage video [id or url] (alt: `video [id or url]`)
loadpage playlist [id or url] (alt: `playlist [id or url] `)
loadpage channel [id or url] (alt: `channel [id or url] `)
</code></pre>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<p><code>history</code> is used to manage page history (<code>Backspace</code> equivalent).</p>
<pre><code class="language-vim">history back (alt: `back`)
history clear
</code></pre>
<h2 id="utility"><a class="header" href="#utility">Utility</a></h2>
<pre><code class="language-vim">reload (alt `r`)
reload configs (alt `reload/r config/configs`)
flush
quit (alt `q`, `exit`, `x`)
run [command]
parrun [command]
</code></pre>
<blockquote>
<p>The <code>flush</code> command is used to run all tasks in queue immediately, this is usually done automatically.</p>
<p>But for when tasks are stacked up in the <em>same</em> event loop and the order of which they are executed matters, this command can be used to force the already stacked up commands to be ran first.</p>
</blockquote>
<blockquote>
<p><code>run</code> is used for running <em>blocking commands</em>, while <code>parrun</code> is non-blocking.</p>
</blockquote>
<h2 id="library-1"><a class="header" href="#library-1">Library</a></h2>
<pre><code class="language-vim">bookmark [id]                   Bookmark item with ID (item must be already loaded)
unmark [id]                     Remove bookmark item with ID
togglemark [id]                 Toggle bookmark status
sub/sync [id or url]            Add channel to subscription, or sync an existing channel
unsub [id or url]               Remove channel from subscription
syncall                         Sync all subscriptions
</code></pre>
<h2 id="text-commands"><a class="header" href="#text-commands">Text commands</a></h2>
<p>Text commands generates a <em>text only response</em> without launching the TUI.</p>
<pre><code class="language-vim">help
version
</code></pre>
<h2 id="command-bindings-1"><a class="header" href="#command-bindings-1">Command bindings</a></h2>
<p>Commands can be binded to keys just like normal key bindings, bindings can be edited in <code>commandbindings.yml</code>. Below are the default bindings:</p>
<div class="table-wrapper"><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody>
<tr><td><code>Ctrl + F</code></td><td>Open page in browser</td></tr>
<tr><td><code>Ctrl + C</code></td><td>Copy page url</td></tr>
<tr><td><code>Ctrl + P</code></td><td>Play hovered video</td></tr>
<tr><td><code>Ctrl + A</code></td><td>Play hovered audio</td></tr>
<tr><td><code>Shift + A</code></td><td>Play hovered audio on repeat (shuffled if hovering a playlist)</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="config-files"><a class="header" href="#config-files">Config files</a></h1>
<p>Config files are located in <code>~/.config/youtube-tui</code>, modifying them changes the behavior of the TUI accordingly.</p>
<p>Config files will be generated if not present, backed up and regenerated if there is an issue reading it (most likely caused by changes made by user or updates).</p>
<p>In the following sections we will go through all config files including:</p>
<ul>
<li><a href="config/./main.html"><code>main.yml</code></a></li>
<li><a href="config/./commands.html"><code>commands.yml</code></a></li>
<li><a href="config/./keybindings.html"><code>keybindings.yml</code></a></li>
<li><a href="config/./pages.html"><code>pages.yml</code></a></li>
<li><a href="config/./appearance.html"><code>appearance.yml</code></a></li>
<li><a href="config/./search.html"><code>search.yml</code></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-main-config"><a class="header" href="#the-main-config">The main config</a></h1>
<p>The main config file is located in <code>~/.config/youtube-tui/main.yml</code>.</p>
<h2 id="example-mainyml"><a class="header" href="#example-mainyml">Example main.yml</a></h2>
<pre><code class="language-yaml">mouse_support: true
invidious_instance: https://y.com.sb
write_config: Try
max_watch_history: 50
allow_unicode: false
message_bar_default: All good :)
images: Sixels
refresh_after_modifying_search_filters: true
image_index: 4
provider: YouTube
env:
  browser: firefox
  terminal-emulator: konsole -e
  youtube-downloader: yt-dlp
  video-player: mpv
</code></pre>
<hr>
<p>Below are the description of each of the fields:</p>
<h3 id="mouse_support"><a class="header" href="#mouse_support">mouse_support</a></h3>
<p>Whether mouse click events are supports, if <code>false</code> then mouse will not do anything to the program.</p>
<p><em>Accept: <code>true</code>/<code>false</code></em></p>
<h3 id="invidious_instance"><a class="header" href="#invidious_instance">invidious_instance</a></h3>
<p>The Invidious instance you want to use, a full list of Invidious instances can be found here <a href="https://api.invidious.io" target=_blank><em>here</em></a>.</p>
<p><em>Accept: string of a valid url to an Invidious instance</em></p>
<h3 id="write_config"><a class="header" href="#write_config">write_config</a></h3>
<p>Whether to write to config after every read, this allows for auto-formatting the config files, as well as removing any error/deprecated options and adding new options.</p>
<div class="table-wrapper"><table><thead><tr><th>write_config</th><th>Description</th></tr></thead><tbody>
<tr><td><code>Must</code></td><td>Always write to config, panics if failed.</td></tr>
<tr><td><code>Try</code></td><td>Tries to write to config, continues if failed.</td></tr>
<tr><td><code>Dont</code></td><td>Don't write to config at all</td></tr>
</tbody></table>
</div>
<blockquote>
<p><code>main.yml</code> is a loaded with <code>Try</code> no matter what.</p>
</blockquote>
<p><em>Accept: <code>Must</code>/<code>Try</code>/<code>Dont</code></em></p>
<h3 id="max_watch_history"><a class="header" href="#max_watch_history">max_watch_history</a></h3>
<p>The maximum length that the watch history can hold, a value higher will record more items, but will also result in a larger file size in storage.</p>
<p><em>Accept: positive integer below 2<sup><em>your CPU architecture</em></sup> - 1</em></p>
<h3 id="allow_unicode"><a class="header" href="#allow_unicode">allow_unicode</a></h3>
<p>Enable unicode in video and playlist names, doing so may cause unwanted behaviors like video name continuing into the info field to the right.</p>
<p><em>Accept: <code>true</code>/<code>false</code></em></p>
<h3 id="message_bar_default"><a class="header" href="#message_bar_default">message_bar_default</a></h3>
<p>The default message displayed in the message bar.</p>
<p><em>Accept: any string</em></p>
<h3 id="images"><a class="header" href="#images">images</a></h3>
<p>How to display thumbnails, if <code>None</code> is selected video thumbnails will not be downloaded in the first place.</p>
<p><em>Accept: <code>Sixels</code>/<code>HalfBlocks</code>/<code>None</code></em></p>
<h3 id="refresh_after_modifying_search_filters"><a class="header" href="#refresh_after_modifying_search_filters">refresh_after_modifying_search_filters</a></h3>
<p>Whether to refresh the current search page after search filters are modified</p>
<p><em>Accept: <code>true</code>/<code>false</code></em></p>
<h3 id="image_index"><a class="header" href="#image_index">image_index</a></h3>
<p>The index in the array of thumbnail qualities you want to download</p>
<p>Typically these are the avaliable qualities:</p>
<div class="table-wrapper"><table><thead><tr><th>Index</th><th>Label</th><th>Resolution</th></tr></thead><tbody>
<tr><td>0</td><td>maxres</td><td>1280 x 720</td></tr>
<tr><td>1</td><td>maxresdefault</td><td>1280 x 720</td></tr>
<tr><td>2</td><td>sddefault</td><td>640 x 480</td></tr>
<tr><td>3</td><td>high</td><td>480 x 360</td></tr>
<tr><td>4</td><td>medium</td><td>320 x 180</td></tr>
<tr><td>5</td><td>default</td><td>120 x 90</td></tr>
<tr><td>6</td><td>start</td><td>120 x 90</td></tr>
<tr><td>7</td><td>middle</td><td>120 x 90</td></tr>
<tr><td>8</td><td>end</td><td>120 x 90</td></tr>
</tbody></table>
</div>
<p>Usually you don't want to use the max resolution as it will create a large gap between the page being loaded and before the thumbnails are started to get displayed</p>
<p><em>Accept: integer that is a valid index</em></p>
<h3 id="provider"><a class="header" href="#provider">Provider</a></h3>
<p>This changes the <code>${url}</code> and <code>${embed-url}</code> of videos, allowing you to watch videos from Invidious if it is restricted on YouTube.</p>
<p>(Don't always use Invidious if YouTube is working, because first of all the load time if gonna be much slower, and secondly you will be DDoSing Invidious)</p>
<p><em>Accept: <code>YouTube</code>/<code>Invidious</code></em></p>
<h3 id="env"><a class="header" href="#env">env</a></h3>
<p>Env are variables that can be used in <code>commands.yml</code>, this allows you to change multiple commands by modifying just one env variable. And not to be confused with system/terminal environment variables, these are just <em>&quot;a thing&quot;</em> that you can use in the TUI.</p>
<p><em>Accept: <code>string_key: string_value</code> pairs</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="commands-config"><a class="header" href="#commands-config">Commands config</a></h1>
<p>The commands config file decides what options (that will run a certain command on select) to be display in the <em>video</em> and <em>playlist</em> page respectively, it is located in <code>~/.config/youtube-tui/commands.yml</code>.</p>
<h2 id="example-commands-config"><a class="header" href="#example-commands-config">Example commands config</a></h2>
<pre><code class="language-yaml">launch_command: loadpage popular ;; flush ;; history clear # suggested to set page to watchhistory if you don't want to wait for popular to load
video:
- Play video: ${video-player} ${embed-url}
- Play audio: ${terminal-emulator} ${video-player} ${embed-url} --no-video
- Play audio (loop): ${terminal-emulator} ${video-player} ${embed-url} --no-video --loop-file=inf
- View channel: :channel ${channel-id}
- Open in browser: ${browser} ${url}
- Download video (webm): ${terminal-emulator} ${youtube-downloader} -o ${download-path} ${embed-url}
- Download audio (opus): ${terminal-emulator} ${youtube-downloader} -o ${download-path} ${embed-url} -x
- 'Mode: ${provider}': '%switch-provider%'
playlist:
- Switch view: '%switch-view%'
- Play all videos: ${video-player} ${all-videos}
- Play all audio: ${terminal-emulator} ${video-player} ${all-videos} --no-video
- Shuffle play all audio: ${terminal-emulator} ${video-player} ${all-videos} --no-video --shuffle
- Shuffle play all audio (loop): ${terminal-emulator} ${video-player} ${all-videos} --no-video --shuffle --loop-playlist=inf
- View channel: :channel ${channel-id}
- Open in browser: ${browser} ${url}
- Download all video (webm): ${terminal-emulator} ${youtube-downloader} -o ${download-path} ${all-videos}
- Download all audio (opus): ${terminal-emulator} ${youtube-downloader} -o ${download-path} ${all-videos} -x
- 'Mode: ${provider}': '%switch-provider%'
</code></pre>
<h2 id="env-variables"><a class="header" href="#env-variables">Env variables</a></h2>
<p>Notice that a lot of the commands contains the <code>${label}</code> pattern, this actually replaces the text with the env variables set in <code>main.yml</code>, or is added by the current page (video or playlist) on-the-go.</p>
<p>Replacing all these with known values it might look something like this:</p>
<pre><code class="language-yaml">launch_command: loadpage popular ;; flush ;; history clear
video:
- Play video: mpv 'https://youtube.com/embed/dQw4w9WgXcQ'
- Play audio: konsole -e mpv 'https://youtube.com/embed/dQw4w9WgXcQ' --no-video
- Open in browser: firefox 'https://youtu.be/dQw4w9WgXcQ'
- Download video (webm): konsole -e yt-dlp -o '~/Downloads/%(title)s-%(id)s.%(ext)s' 'https://youtube.com/embed/dQw4w9WgXcQ'
- 'Mode: ${provider}': '%switch-provider%'

playlist:
- Switch view: '%switch-view%'
- Play all videos: mpv 'https://youtube.com/embed/Z8oiddSsB6I' 'https://youtube.com/embed/yiS0DPekSDQ' 'https://youtube.com/embed/YhM8GYuDFps' # and much more...
- Play all audio: konsole -e mpv 'https://youtube.com/embed/Z8oiddSsB6I' 'https://youtube.com/embed/yiS0DPekSDQ' 'https://youtube.com/embed/YhM8GYuDFps' --no-video
- Shuffle play all audio: konsole -e mpv 'https://youtube.com/embed/Z8oiddSsB6I' 'https://youtube.com/embed/yiS0DPekSDQ' 'https://youtube.com/embed/YhM8GYuDFps' --no-video --shuffle
- Open in browser: firefox 'https://www.youtube.com/playlist?list=PLdgHTasZAjYZlCXN9rTcX9LFOQ-RIrzCs'
- Download all video (webm): konsole -e yt-dlp -o '~/Downloads/%(title)s-%(id)s.%(ext)s' 'https://youtube.com/embed/Z8oiddSsB6I' 'https://youtube.com/embed/yiS0DPekSDQ' 'https://youtube.com/embed/YhM8GYuDFps'
- 'Mode: ${provider}': '%switch-provider%'
</code></pre>
<blockquote>
<p>Global commands can also be used here. (Ones that start with an <code>:</code>).</p>
</blockquote>
<hr>
<p>Below are the description of each of the fields:</p>
<h3 id="video"><a class="header" href="#video">video</a></h3>
<p>Commands to be displayed in a video page.</p>
<p><em>Accept: <code>string_label: string_command</code> pairs</em></p>
<h3 id="playlist"><a class="header" href="#playlist">playlist</a></h3>
<p>Commands to be displayed in a playlist page (commands view).</p>
<p><em>Accept: <code>string_label: string_command</code> pairs</em></p>
<h2 id="env-reference"><a class="header" href="#env-reference">Env reference</a></h2>
<p>Does not include custom env set in <code>main.yml</code>.</p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Page</th><th>Value</th></tr></thead><tbody>
<tr><td><code>url</code></td><td>search, popular, trending, video, playlist</td><td>String url to the web page</td></tr>
<tr><td><code>id</code></td><td>video, playlist</td><td>String id of the video or playlist</td></tr>
<tr><td><code>channel-id</code></td><td>video, playlist</td><td>String id of the channel</td></tr>
<tr><td><code>embed-url</code></td><td>video</td><td>String url to the embed video (required to play video using mpv from Invidious)</td></tr>
<tr><td><code>all-videos</code></td><td>playlist</td><td>String url<em><strong>s</strong></em> separated by space to all embed videos in a playlist</td></tr>
<tr><td><code>hover-url</code></td><td>trending, popular, search</td><td>Url of the currenly hovering item.</td></tr>
<tr><td><code>hover-channel-url</code></td><td>feed</td><td>Url of the currenly hovering channel.</td></tr>
<tr><td><code>hover-channel-id</code></td><td>feed</td><td>ID of the currenly hovering channel.</td></tr>
<tr><td><code>hover-video-url</code></td><td>feed</td><td>Url of the currenly hovering video.</td></tr>
<tr><td><code>hover-video-id</code></td><td>feed</td><td>ID of the currenly hovering video.</td></tr>
<tr><td><code>all-ids</code></td><td>playlist</td><td>IDs of all videos in a playlist, separated with space.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="keybindings-config"><a class="header" href="#keybindings-config">Keybindings config</a></h1>
<p>The keybindings config binds each key to an action, or multiple keys for the same action. It can be found in <code>~/.config/youtube-tui/keybindings.yml</code>.</p>
<h2 id="example-keybindings-config"><a class="header" href="#example-keybindings-config">Example keybindings config</a></h2>
<pre><code class="language-yaml">'q':
  0: Exit
Down:
  0: MoveDown
'r':
  2: Reload
Enter:
  0: Select
'l':
  0: MoveRight
Up:
  0: MoveUp
'j':
  0: MoveDown
End:
  0: ClearHistory
Right:
  0: MoveRight
Backspace:
  0: Back
'h':
  0: MoveLeft
F5:
  0: Reload
'k':
  0: MoveUp
Esc:
  0: Deselect
Home:
  0: FirstHistory
Left:
  0: MoveLeft
  4: Back
</code></pre>
<h2 id="keys"><a class="header" href="#keys">Keys</a></h2>
<p>Keys can be:</p>
<ul>
<li>A single character (e.g. <code>'q'</code>)</li>
<li>Named keys (e.g. <code>Up</code>, <code>Down</code>)</li>
<li>Function keys (e.g. <code>F5</code>)</li>
</ul>
<h2 id="key-modifiers"><a class="header" href="#key-modifiers">Key modifiers</a></h2>
<p>Key modifiers are the modifier keys that are pressed along with the actual key, for instance in <code>Ctrl + C</code> would have the modifier <code>Ctrl</code> and the key <code>C</code>.</p>
<p>Each modifier has its own code, for instance <code>Shift</code> would be <code>1</code> and <code>Ctrl</code> would be <code>2</code>. The final modifier will be the <u>sum</u> of all modifier keys. (<code>Ctrl + Shift</code> would be a <code>3</code>).</p>
<h3 id="keys-reference"><a class="header" href="#keys-reference">Keys reference</a></h3>
<p>All possible keys can be found <a href="https://docs.rs/crossterm/latest/crossterm/event/enum.KeyCode.html" target=_blank><em>here</em></a>.</p>
<blockquote>
<p>Enums are represented using the character <code>!</code>, for example the <code>q</code> key would be <code>!Char 'q'</code></p>
<p><code>Shift + Q</code> however would be <code>!Char 'Q'</code> with <code>0</code> as modifier code as <code>Shift</code> turns <code>q</code> into an upper case character.</p>
</blockquote>
<h3 id="modifiers-reference"><a class="header" href="#modifiers-reference">Modifiers reference</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Modifier</th><th>Code</th></tr></thead><tbody>
<tr><td>None</td><td><code>0</code></td></tr>
<tr><td><code>Shift</code></td><td><code>1</code></td></tr>
<tr><td><code>Ctrl</code></td><td><code>2</code></td></tr>
<tr><td><code>Alt</code></td><td><code>4</code></td></tr>
<tr><td><code>Super</code>/&quot;Windows&quot; key</td><td><code>8</code></td></tr>
<tr><td><code>Hyper</code></td><td><code>16</code></td></tr>
<tr><td><code>Meta</code></td><td><code>32</code></td></tr>
</tbody></table>
</div>
<p>All key modifiers (if any are added) will be in <a href="https://docs.rs/crossterm/latest/crossterm/event/struct.KeyModifiers.html" target=_blank><em>the code</em></a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-bindings-2"><a class="header" href="#command-bindings-2">Command bindings</a></h1>
<p>Commands can be binded to keys (just like normal keybindings), it allows functionalities such as <u>playing hovered videos</u>. Bindings can be either <em>global</em> or <em>page specific</em>, it is located in <code>~/.config/youtube-tui/commandbindings.yml</code>.</p>
<h2 id="example-commandbindings-config"><a class="header" href="#example-commandbindings-config">Example commandbindings config</a></h2>
<pre><code class="language-yml">global:
  'f':
    2: run ${browser} '${url}'
  'c':
    2: cp ${url}
video: {}
search:
  'a':
    2: run ${terminal-emulator} mpv '${hover-url}' --no-video
  'A':
    1: run ${terminal-emulator} mpv '${hover-url}' --no-video --loop-playlist=inf --shuffle
  'p':
    2: run mpv '${hover-url}'
watchhistory:
  'A':
    1: run ${terminal-emulator} mpv '${hover-url}' --no-video --loop-playlist=inf --shuffle
  'p':
    2: run mpv '${hover-url}'
  'a':
    2: run ${terminal-emulator} mpv '${hover-url}' --no-video
# etc
</code></pre>
<hr>
<p>Specifications are same as <a href="config/commands.html"><code>comamnds.yml</code></a>, the exact same envs can be used.</p>
<p>Default bindings can be found in <a href="config/../commands.html#command-bindings">this section</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="layout-config"><a class="header" href="#layout-config">Layout config</a></h1>
<p>The layout config determins the position of where each item is placed, mainly their order. The config file can be found in <code>~/.config/youtube-tui/pages.yml</code>.</p>
<h2 id="example-layout-config"><a class="header" href="#example-layout-config">Example layout config</a></h2>
<pre><code class="language-yaml">main_menu:
  layout:
  - type: NonCenteredRow
    items:
    - SearchBar
    - SearchFilters
  - type: CenteredRow
    items:
    - Popular
    - Trending
    - History
  - type: NonCenteredRow
    items:
    - ItemList
  - type: NonCenteredRow
    items:
    - MessageBar
  message: Loading main menu...

# and much more ...
</code></pre>
<h2 id="items"><a class="header" href="#items">Items</a></h2>
<p>Each item is an individual &quot;thing&quot;, these things can be optionally selectable, or hoverable by the cursor.</p>
<h2 id="rows"><a class="header" href="#rows">Rows</a></h2>
<p>A row is a horizontal row of items, it can be either centered (like the buttons) or non centered (which will align to the left).</p>
<blockquote>
<p>Non centered rows are faster and less crash prone compared to centered rows.</p>
</blockquote>
<p>Each item are ordered from left to right.</p>
<h2 id="message"><a class="header" href="#message">Message</a></h2>
<p>The message to display when loading the page.</p>
<h3 id="items-reference"><a class="header" href="#items-reference">Items reference</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Item</th><th>Can be used in page</th><th>Description</th></tr></thead><tbody>
<tr><td>MessageBar</td><td>Any</td><td>The panel (default in the bottom of every page) that displays message and error messages</td></tr>
<tr><td>SearchBar</td><td>Any</td><td>A text field that searches that entered query</td></tr>
<tr><td>SearchFilters</td><td>Any</td><td>A button that brings up a popup for modifying search filters</td></tr>
<tr><td>Trending</td><td>Any</td><td>Loads the trending page</td></tr>
<tr><td>Popular</td><td>Any</td><td>Loads the popular page</td></tr>
<tr><td>History</td><td>Any</td><td>Loads the watch history page</td></tr>
<tr><td>ItemList</td><td>Main menu/search</td><td>Display multiple videos, channels, or playlists in a list</td></tr>
<tr><td>SingleItemInfo</td><td>Single item</td><td>Display info of one single item (a single video or playlist)</td></tr>
<tr><td>ChannelDisplay</td><td>Channel display</td><td>Display information of a channel, depending on the page</td></tr>
<tr><td>ChannelMain</td><td>Channel display</td><td>Loads the main channel page</td></tr>
<tr><td>ChannelVideos</td><td>Channel display</td><td>Loads the channel videos page</td></tr>
<tr><td>ChannelPlaylists</td><td>Channel display</td><td>Loads the channel playlists page</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="appearance-config"><a class="header" href="#appearance-config">Appearance config</a></h1>
<p>Appearance config controls the colours and the &quot;looks and feel&quot; of the TUI, it is located in <code>~/.config/youtube-tui/appearance.yml</code>.</p>
<h2 id="example-appearance-config"><a class="header" href="#example-appearance-config">Example appearance config</a></h2>
<pre><code class="language-yaml">borders: Rounded
colors:
  text: Reset
  text_special: Reset
  text_secondary: Reset
  text_error: LightRed
  outline: Reset
  outline_selected: LightBlue
  outline_hover: LightRed
  outline_secondary: LightYellow
  message_outline: '#FF7F00'
  message_error_outline: LightRed
  message_success_outline: LightGreen
  item_info:
    tag: Gray
    title: LightBlue
    description: Gray
    author: LightGreen
    viewcount: LightYellow
    length: LightCyan
    published: LightMagenta
    video_count: '#838DFF'
    sub_count: '#65FFBA'
    likes: '#C8FF81'
    genre: '#FF75D7'
    page_turner: Gray
</code></pre>
<hr>
<p>Below are the description of each of the fields:</p>
<h3 id="borders"><a class="header" href="#borders">borders</a></h3>
<p>The style of the borders/outline, if outdated view <a href="https://docs.rs/tui/latest/tui/widgets/enum.BorderType.html" target=_blank><em>here</em></a>.</p>
<p><em>Accept: <code>Plain</code>/<code>Rounded</code>/<code>Double</code>/<code>Thick</code></em></p>
<h3 id="literally-everything-else"><a class="header" href="#literally-everything-else">Literally everything else</a></h3>
<p>Any colours, here are the 2 main represenations of colours, for more check out this page <a href="https://docs.rs/tui/latest/tui/style/enum.Color.html" target=_blank><em>here</em></a>.</p>
<h4 id="terminal-colour"><a class="header" href="#terminal-colour">Terminal colour</a></h4>
<p>This can be modified by the themes of your terminal (e.g. white, green, etc).</p>
<h4 id="hex"><a class="header" href="#hex">Hex</a></h4>
<p>Hex should be a string that starts with the <code>#</code> character, and can be from <code>000000</code> (black) to <code>FFFFFF</code> (white).</p>
<blockquote>
<p>RGB color values has been deprecated</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="default-search-options"><a class="header" href="#default-search-options">Default search options</a></h1>
<p>The default search query/filters when launching the TUI, this can be found in <code>~/.config/youtube-tui/search.yml</code>, but should not be &quot;customised&quot; like how you would to a config file because it's just a configurable default value.</p>
<h2 id="example-search-default-value"><a class="header" href="#example-search-default-value">Example search default value</a></h2>
<pre><code class="language-yaml">query: ''
filters:
  sort: Relevance
  date: None
  duration: None
  type: All
</code></pre>
<hr>
<p>Below are the description of each field</p>
<h3 id="query"><a class="header" href="#query">query</a></h3>
<p>The default query when you launch the TUI.</p>
<p><em>Accept: any string</em></p>
<h3 id="sort"><a class="header" href="#sort">Sort</a></h3>
<p>How the search results are sorted.</p>
<p><em>Accept: <code>Relevance</code>/<code>Rating</code>/<code>Date</code>/<code>Views</code></em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h1>
<p>This sections talks about roughly how this TUI works, <em>crates</em>, <em>important structs</em> and their location, and the <em>main event loop</em> will be mentioned.</p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of contents</a></h2>
<ul>
<li><a href="explaination/./framework.html">Framework</a> talks about how a <em>single frame</em> is rendered, and how a <em>single input</em> is handled.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="framework"><a class="header" href="#framework">Framework</a></h1>
<p>At the core of this TUI, is the framework from the <a href="https://crates.io/crates/tui-additions" target=_blank><code>tui-additions</code></a> crate, it allows the program to <em>render</em> onto the screen, <em>take inputs</em> (mouse and keyboard) in an orderly fashion.</p>
<p>A <a href="https://docs.rs/tui-additions/latest/tui_additions/framework/struct.Framework.html" target=_blank>Framework</a> holds a bunch of other structs, a simplified version would looks something like this.</p>
<pre><code class="language-rs">struct Framework {
	state: Vec&lt;Vec&lt;Item&gt;&gt;,
	cursor: CursorState,
	selectables: Vec&lt;Vec&lt;(usize, usize)&gt;&gt;,
	data: FrameworkData,
	history: FrameworkHistory,
}
</code></pre>
<h2 id="state"><a class="header" href="#state">State</a></h2>
<p>Holds a 2D array of items, but that is just the simplified version.</p>
<p>The <code>State</code> struct also holds the width of the items, heigh of the rows, and other details such as <em>if the row should be centered or not</em>.</p>
<h2 id="cursor-1"><a class="header" href="#cursor-1">Cursor</a></h2>
<p>The cursor can be in one of these states.</p>
<ul>
<li>Selected - where an item is selected.</li>
<li>Hover - when its being moved around.</li>
<li>None - when the page first loads, the cursor does not have a state.</li>
</ul>
<h2 id="selectables"><a class="header" href="#selectables">Selectables</a></h2>
<p>This is an interesting one. As <a href="explaination/framework.html#selectableself---bool">mentioned below</a>, some items can be hovered when other cannot. Each <code>selectables[x][y]</code> maps to a selectable (hoverable) coordinate.</p>
<p>Instead of using a <code>HashMap&lt;(usize, usize)&gt;</code>, using a 2D array ensures that all <em>x: 0..range</em> and <em>y: 0..range</em> are mapped to a selectable item. And moving the cursor left is as easy as increasing x by 1, without having to worry about selectability check and stuff.</p>
<h2 id="data"><a class="header" href="#data">Data</a></h2>
<p>There are 2 pools of data available - <em>global</em> and <em>state</em>.</p>
<p><strong>Global data</strong> are global across all pages, this is mainly used to store config structs, as they are meant to be applied globally.</p>
<p><strong>State data</strong> are exclusive to each page, this is done to ensure that each page will get the correct data. </p>
<blockquote>
<p>For example, if state data is not used, the next page will overwrite data in the previous page, making going back in history impossible.</p>
</blockquote>
<p><a href="https://github.com/Siriusmart/tui-additions/blob/3087abbf8e121f26c0956cda5fb43efc7b862bc7/src/framework/framework.rs#LL39C4-L39C4">This</a> showed how state data stays with the history <em>snapshot</em> of the page, whereas global data does not.</p>
<h2 id="history-1"><a class="header" href="#history-1">History</a></h2>
<p>This stores the past states and data of the struct, pretty self explanatory.</p>
<hr>
<h2 id="items-1"><a class="header" href="#items-1">Items</a></h2>
<p>Items are placed across the screen <em>in rows</em>, each item is <u>individual</u> and changing of one should not affect others in anyway.</p>
<p><img src="explaination/../images/rows.svg" alt="" /></p>
<blockquote>
<p>Diagram showing that individual items arranged in rows on screen.</p>
</blockquote>
<p>Each item has a set of functions from the trait <a href="https://docs.rs/tui-additions/latest/tui_additions/framework/trait.FrameworkItem.html" target=_blank>FrameworkItem</a>:</p>
<h3 id="selectableself---bool"><a class="header" href="#selectableself---bool">.selectable(&amp;self) -&gt; bool</a></h3>
<p>The function is ran on page load, it determines whether <em>the item can be hovered by cursor or not</em>.</p>
<p>Most item returns true, as they can be selected and hovered.</p>
<p>However there are some exceptions, including MessageBar and the big info display in channel home page.</p>
<blockquote>
<p>PageButtons returns true in this function, as they can be hovered by cursor. Instead, <code>.select()</code> is responsible for their special behaviour.</p>
</blockquote>
<h3 id="selectmut-self-mut-framework---bool"><a class="header" href="#selectmut-self-mut-framework---bool">.select(&amp;mut self, &amp;mut Framework) -&gt; bool</a></h3>
<p>This function is ran when an item is selected (pressed enter on), it allows the item to modify its own state and the framework state. The returned boolean also determines if the selecting item will <em>stay selected</em> and capture key input.</p>
<p>Most items returns true in this function, for example SearchBar stays selected and captures key input after being selected, until deselect.</p>
<p>PageButtons returns false, as they don't want to say selected. This does not mean the function does nothing, they are still able to modify their own states and <u>push a LoadPage task to queue</u>.</p>
<h3 id="deselectmut-self-mut-framework---bool"><a class="header" href="#deselectmut-self-mut-framework---bool">.deselect(&amp;mut self, &amp;mut Framework) -&gt; bool</a></h3>
<p>This function is the exact opposite  of the .select() function, it is called when the <em>deselect keybinding</em> (Esc) is pressed, or the mouse clicks somewhere outside the item.</p>
<p>All items returns true on this function.</p>
<blockquote>
<p>A fun fact is that items can actually return false, and refuse to get deselected. This can be useful when waiting for a condition to be met.</p>
</blockquote>
<h3 id="load_itemmut-self-mut-framework----result"><a class="header" href="#load_itemmut-self-mut-framework----result">.load_item(&amp;mut self, &amp;mut Framework, ...) -&gt; Result</a></h3>
<p>This is the function responsible for the loading of items. The YouTube TUI adds an empty item to the screen, then calls this function for the item to load itself.</p>
<p>An item that heavily rely on this function is ItemList, it loads video according to the current page, whether it's Library, History or Search.</p>
<blockquote>
<p>Currently, this function can be very inefficient as items are loaded one after another (sync). This will improve once Rust implements async traits.</p>
</blockquote>
<p>Errors will be displayed in MessageBar in the next frame.</p>
<h3 id="rendermut-self-mut-framework-mut-frame-area"><a class="header" href="#rendermut-self-mut-framework-mut-frame-area">.render(&amp;mut self, &amp;mut Framework, &amp;mut Frame, area)</a></h3>
<p>Items should be able to render itself within <code>area</code> of <code>Frame</code>, the area is different for each item, and should not overlap.</p>
<p>Each frame is rendered 2 times.</p>
<ol>
<li>Render all normal items.</li>
<li>Render all popups, as they need to be above normal items.</li>
</ol>
<p>Normal items should not render in the popup render, for example:</p>
<pre><code class="language-rs">if popup_render {
	return;
}
</code></pre>
<h3 id="key_eventmut-self-mut-framework-keyevent---result"><a class="header" href="#key_eventmut-self-mut-framework-keyevent---result">.key_event(&amp;mut self, &amp;mut Framework, KeyEvent) -&gt; Result</a></h3>
<p>Pretty self explanatory, selected item takes in a key event and do some modification to itself and/or the Framework state.</p>
<p>Errors will be displayed in MessageBar in the next frame.</p>
<h3 id="mouse_eventmut-self-mut-framework-x-y---bool"><a class="header" href="#mouse_eventmut-self-mut-framework-x-y---bool">.mouse_event(&amp;mut self, &amp;mut Framework, x, y) -&gt; bool</a></h3>
<p>Similar to key_event, this function takes in the relative <code>x</code> and <code>y</code> of the mouse click on the item.</p>
<p>The return boolean indicates if the item has been modified by the mouse click, if true then the screen will rerender.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="event-loop"><a class="header" href="#event-loop">Event loop</a></h1>
<p>The event loop is like the glue that puts everything together.</p>
<h2 id="before-the-event-loop"><a class="header" href="#before-the-event-loop">Before the event loop</a></h2>
<p>But before the TUI enters it's main event loop, it does several things.</p>
<h3 id="1-check-what-command-is-being-ran"><a class="header" href="#1-check-what-command-is-being-ran">1. Check what command is being ran.</a></h3>
<p>If the command does not need to enter the main TUI, don't enter the main TUI.</p>
<p>For example, <code>help</code> or <code>version</code> just returns a text message on your terminal screen. In <a href="https://github.com/Siriusmart/youtube-tui/blob/f3b1912e0d99b46fd8c7b0be2a1606a7b087b650/src/main.rs#LL19C1-L19C43"><code>main.rs</code></a> line 19, it is checked whether the entered command is a valid text command. If so, the program exits without ever reaching the TUI code.</p>
<h3 id="2-enable-raw-mode"><a class="header" href="#2-enable-raw-mode">2. Enable raw mode</a></h3>
<p>If you've tried killing youtube-tui while it's running (<code>killall youtube-tui</code>), your terminal should be in a weird state - where everything, including mouse movement seem to be captured. That's the raw mode.</p>
<p>I have no idea what is special about it, but it is in the examples of <code>tui-rs</code> <a href="https://github.com/fdehau/tui-rs/blob/fafad6c96109610825aad89c4bba5253e01101ed/examples/block.rs#L18">here</a> (one of the main dependency of this TUI).</p>
<h3 id="3-init"><a class="header" href="#3-init">3. Init</a></h3>
<p>There are a bunch of things happening in this stage, but it really just boils down to a few basic things:</p>
<ul>
<li>Reading/creating config files, subscriptions, libraries and inserting them to the <em>pool of shared data</em> (global data) within the <a href="https://docs.rs/tui-additions/0.1.13/tui_additions/framework/struct.Framework.html">framework</a> struct.</li>
</ul>
<p>Global data is used here, the reason should be obvious. All pages, should share the same config, there is no need to keep extra copies of the (usually) same thing and waste memory.</p>
<ul>
<li>Insert some structs needed for the TUI to run.</li>
</ul>
<p>These structs includes <a href="https://github.com/Siriusmart/youtube-tui/blob/master/src/global/structs/message.rs"><code>Message</code></a> storing the message to be displayed in message bar, and <a href="https://github.com/Siriusmart/youtube-tui/blob/master/src/global/structs/status.rs"><code>Status</code></a>, useful for storing all sorts of values, for example helping with the running (mostly rendering) of the TUI.</p>
<ul>
<li>Move some files</li>
</ul>
<p>Some files have to be moved to <code>~/.cache/youtube-tui/</code> from (usually) <code>~/.local/share/youtube-tui/</code> for stored content to be used by the TUI, this is why running multiple instances of the program can mess things up - as one instance exits the files got moved from <code>.cache</code> to <code>.local</code>, and the other instance no longer sees the files they thought was still in <code>.cache</code>.</p>
<blockquote>
<p>The full init code is <a href="https://github.com/Siriusmart/youtube-tui/blob/master/src/init.rs">here</a></p>
</blockquote>
<hr />
<p>todo...</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changelogs"><a class="header" href="#changelogs">Changelogs</a></h1>
<h2 id="v073-latest-stable-on-cratesio"><a class="header" href="#v073-latest-stable-on-cratesio">v0.7.3 (latest stable on crates.io)</a></h2>
<h3 id="added"><a class="header" href="#added">Added</a></h3>
<ul>
<li>Lazy feed syncing (configurable), so you are not actively ddosing the Invidious instance as badly.</li>
</ul>
<h3 id="fixed"><a class="header" href="#fixed">Fixed</a></h3>
<ul>
<li>Search bar no longer shows escaped search query: the original text string is displayed instead.</li>
<li>Fixed something about labeling channels with * although no new video is published.</li>
<li>Blank screen on loadpage if itemlist is empty.</li>
</ul>
<h3 id="v072"><a class="header" href="#v072">v0.7.2</a></h3>
<h4 id="added-1"><a class="header" href="#added-1">Added</a></h4>
<ul>
<li>Feeds page, and the subscriptions system.</li>
<li>Reduced compile time needed by a lot.</li>
</ul>
<h4 id="fixed-1"><a class="header" href="#fixed-1">Fixed</a></h4>
<ul>
<li>Search url not escaped, so searches with symbols or spaces are now working.</li>
</ul>
<h3 id="v071"><a class="header" href="#v071">v0.7.1</a></h3>
<h4 id="added-2"><a class="header" href="#added-2">Added</a></h4>
<ul>
<li>Options for config loading. (<code>write_config</code> in <code>main.yml</code>)</li>
<li>Parrallel/blocking commands <code>parrun</code>/<code>run</code></li>
</ul>
<h4 id="fixed-2"><a class="header" href="#fixed-2">Fixed</a></h4>
<ul>
<li>Fixed crashing when launching without permissions to write to config files (<a href="https://github.com/Siriusmart/youtube-tui/issues/29" target=_blank>issue 29</a>)</li>
</ul>
<h3 id="v070"><a class="header" href="#v070">v0.7.0</a></h3>
<h4 id="added-3"><a class="header" href="#added-3">Added</a></h4>
<ul>
<li>File system based caching</li>
<li>Bookmark library</li>
<li>Save video/playlists for offline viewing</li>
</ul>
<h4 id="fixed-3"><a class="header" href="#fixed-3">Fixed</a></h4>
<ul>
<li>Empty ItemList crash (<a href="https://github.com/Siriusmart/youtube-tui/issues/26" target=_blank>issue 26</a>)</li>
</ul>
<hr>
<h2 id="v062"><a class="header" href="#v062">v0.6.2</a></h2>
<h3 id="added-4"><a class="header" href="#added-4">Added</a></h3>
<ul>
<li>Command bindings</li>
</ul>
<h3 id="fixed-4"><a class="header" href="#fixed-4">Fixed</a></h3>
<ul>
<li>Image not cleared when going back to &quot;switch view&quot;</li>
</ul>
<h3 id="v061"><a class="header" href="#v061">v0.6.1</a></h3>
<h4 id="added-5"><a class="header" href="#added-5">Added</a></h4>
<ul>
<li>Rework of the env system, now using environment variables provided by the OS as opposed to implmenting own version of env</li>
<li>Ability to use envs in command mode</li>
<li>Launch commands (including <code>youtube-tui help</code>)</li>
</ul>
<h4 id="fixed-5"><a class="header" href="#fixed-5">Fixed</a></h4>
<ul>
<li>Screen blinking when pressing up arrow on the first item in playlist page, videos view</li>
</ul>
<h3 id="v060"><a class="header" href="#v060">v0.6.0</a></h3>
<h4 id="added-6"><a class="header" href="#added-6">Added</a></h4>
<ul>
<li>Mouse support</li>
<li>Vim-like commands</li>
<li>Pasting with <code>Ctrl + V</code> in search bar and command mode</li>
</ul>
<hr>
<h2 id="v053"><a class="header" href="#v053">v0.5.3</a></h2>
<h3 id="fixed-6"><a class="header" href="#fixed-6">Fixed</a></h3>
<ul>
<li>Search bar could not handle non English characters (e.g. <a href="https://github.com/Siriusmart/youtube-tui/issues/14" target=_blank>Russian</a>)</li>
</ul>
<h3 id="v052"><a class="header" href="#v052">v0.5.2</a></h3>
<h4 id="added-7"><a class="header" href="#added-7">Added</a></h4>
<ul>
<li>Improved config files (including hex colour support)</li>
<li>Page turners (next/prev page in search)</li>
</ul>
<h3 id="fixed-7"><a class="header" href="#fixed-7">Fixed</a></h3>
<ul>
<li>Where the image and text are displaying in the same place, and the image is displayed over the text</li>
</ul>
<h3 id="v051"><a class="header" href="#v051">v0.5.1</a></h3>
<h4 id="added-8"><a class="header" href="#added-8">Added</a></h4>
<ul>
<li>Image lazy loading (will not rerender image if already rendered)</li>
<li>Optional features that can be disabled</li>
</ul>
<h3 id="v050"><a class="header" href="#v050">v0.5.0</a></h3>
<h4 id="added-9"><a class="header" href="#added-9">Added</a></h4>
<ul>
<li>Entire TUI rewritten from scratch, now using the <a href="https://crates.io/crates/tui-additions" target=_blank><code>tui-additions</code></a> crate</li>
<li>Sixels image support</li>
<li>Improved config files</li>
</ul>
<hr>
<h2 id="v044"><a class="header" href="#v044">v0.4.4</a></h2>
<h3 id="added-10"><a class="header" href="#added-10">Added</a></h3>
<ul>
<li>Added default select item for each page (can be changed in <code>layouts.yml</code>)</li>
</ul>
<h3 id="fixes"><a class="header" href="#fixes">Fixes</a></h3>
<ul>
<li>Video list view in playlists not working</li>
<li>Channel view scroll causes panic</li>
<li>Search options gray backgound + image covering popup</li>
</ul>
<h3 id="v043"><a class="header" href="#v043">v0.4.3</a></h3>
<h4 id="added-11"><a class="header" href="#added-11">Added</a></h4>
<ul>
<li>Refreshing page</li>
<li>Key modifiers for key bindings</li>
<li>Image loading can be disabled</li>
</ul>
<h4 id="fixes-1"><a class="header" href="#fixes-1">Fixes</a></h4>
<ul>
<li>Fixed cache not being cleared after exit</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>
<h2 id="siriusmart"><a class="header" href="#siriusmart"><a href="https://github.com/siriusmart" target=_blank>Siriusmart</a></a></h2>
<p>Creator and main developer of YouTube TUI.</p>
<h2 id="luckyturtledev"><a class="header" href="#luckyturtledev"><a href="https://github.com/LuckyTurtleDev" target=_blank>LuckyTurtleDev</a></a></h2>
<p>Maintainer of the <a href="https://aur.archlinux.org/packages/youtube-tui" target=_blank><code>youtube-tui</code></a> package on AUR.</p>
<h2 id="ruixi-rebirth"><a class="header" href="#ruixi-rebirth"><a href="https://github.com/Ruixi-rebirth" target=_blank>Ruixi-rebirth</a></a></h2>
<p>Maintainer of the <a href="https://search.nixos.org/packages?channel=unstable&query=youtube-tui" ><code>youtube-tui</code></a> on the NixOS repository.</p>
<h2 id="zaedus"><a class="header" href="#zaedus"><a href="https://github.com/zaedus" target=_blank>Zaedus</a></a></h2>
<p>Maintainer of the <a href="https://aur.archlinux.org/packages/youtube-tui-full-bin" target=_blank><code>youtube-tui-full-bin</code></a>, <a href="https://aur.archlinux.org/packages/youtube-tui-nodefaults-bin" target=_blank><code>youtube-tui-nodefaults-bin</code></a> and <a href="https://aur.archlinux.org/packages/youtube-tui-git" target=_blank><code>youtube-tui-git</code></a> package on AUR.</p>
<h2 id="fractal-tess-msrd0"><a class="header" href="#fractal-tess-msrd0"><a href="https://github.com/fractal-tess" target=_blank>Fractal Tess</a>, <a href="https://github.com/msrd0" target=_blank>msrd0</a></a></h2>
<p>Fixed typos in README.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
